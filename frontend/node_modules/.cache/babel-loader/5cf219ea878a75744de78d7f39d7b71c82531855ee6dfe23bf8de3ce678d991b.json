{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\soura\\\\Projects\\\\LearnHub\\\\frontend\\\\src\\\\pages\\\\student\\\\CourseContent.tsx\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport { useParams, Link, useNavigate } from 'react-router-dom';\nimport { useQuery } from '@tanstack/react-query';\nimport api from '../../lib/api';\nimport LoadingScreen from '../../components/common/LoadingScreen';\nimport { CheckCircleIcon } from '@heroicons/react/24/outline';\nimport { toast } from 'react-hot-toast';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst CourseContent = () => {\n  _s();\n  const {\n    courseId,\n    lessonId\n  } = useParams();\n  const navigate = useNavigate();\n  const [activeSection, setActiveSection] = useState(null);\n  const [currentLesson, setCurrentLesson] = useState(null);\n  const [completedLessons, setCompletedLessons] = useState([]);\n  const [progressPercent, setProgressPercent] = useState(0);\n  const [isLoadingCompletion, setIsLoadingCompletion] = useState(false);\n\n  // Fetch course details\n  const {\n    data: courseData,\n    isLoading: isLoadingCourse\n  } = useQuery(['course', courseId], async () => {\n    const response = await api.get(`/courses/${courseId}`);\n    return response.data;\n  });\n\n  // Fetch course sections and lessons\n  const {\n    data: sectionsData,\n    isLoading: isLoadingSections\n  } = useQuery(['course-sections', courseId], async () => {\n    const response = await api.get(`/courses/${courseId}/sections`);\n    return response.data;\n  }, {\n    enabled: !!courseId\n  });\n\n  // Fetch user's progress for this course\n  const {\n    data: progressData,\n    isLoading: isLoadingProgress\n  } = useQuery(['course-progress', courseId], async () => {\n    const response = await api.get(`/enrollments/progress/${courseId}`);\n    return response.data;\n  }, {\n    enabled: !!courseId\n  });\n  const isLoading = isLoadingCourse || isLoadingSections || isLoadingProgress;\n  const course = courseData === null || courseData === void 0 ? void 0 : courseData.data;\n  const sections = (sectionsData === null || sectionsData === void 0 ? void 0 : sectionsData.data) || [];\n\n  // Find current lesson based on URL param or first lesson\n  useEffect(() => {\n    if (!sections || sections.length === 0) return;\n    let foundLesson = null;\n    let firstLessonInCourse = null;\n    for (const section of sections) {\n      if (!firstLessonInCourse && section[0].lessons && section.lessons.length > 0) {\n        firstLessonInCourse = section.lessons[0];\n      }\n      if (lessonId && section.lessons) {\n        const lesson = section.lessons.find(l => l.id === lessonId);\n        if (lesson) {\n          foundLesson = lesson;\n          setActiveSection(section.id);\n          break;\n        }\n      }\n    }\n    if (lessonId && !foundLesson) {\n      // If lessonId is provided but not found, redirect to course page\n      navigate(`/dashboard/courses/${courseId}`);\n      return;\n    }\n\n    // If no lesson is specified in URL, use the first lesson or stay on current\n    setCurrentLesson(foundLesson || firstLessonInCourse);\n\n    // If no lessonId in URL but we found a lesson, update the URL\n    if (!lessonId && firstLessonInCourse) {\n      navigate(`/dashboard/courses/${courseId}/lessons/${firstLessonInCourse.id}`, {\n        replace: true\n      });\n    }\n  }, [sections, lessonId, courseId, navigate]);\n\n  // Update progress when progressData changes\n  useEffect(() => {\n    if (progressData !== null && progressData !== void 0 && progressData.data) {\n      const {\n        completed_lessons,\n        total_lessons,\n        progress_percentage\n      } = progressData.data;\n      setCompletedLessons(completed_lessons || []);\n      setProgressPercent(progress_percentage || 0);\n    }\n  }, [progressData]);\n\n  // Update progress by marking current lesson as completed\n  const markLessonAsCompleted = async () => {\n    if (!currentLesson) return;\n    try {\n      setIsLoadingCompletion(true);\n      const response = await api.post(`/enrollments/progress/${courseId}/lessons/${currentLesson.id}`);\n      if (response.data.success) {\n        toast.success('Progress saved!');\n\n        // Update local state\n        setCompletedLessons(prev => {\n          if (prev.includes(currentLesson.id)) return prev;\n          return [...prev, currentLesson.id];\n        });\n\n        // Calculate new progress percentage\n        const totalLessons = sections.reduce((count, section) => {\n          var _section$lessons;\n          return count + (((_section$lessons = section.lessons) === null || _section$lessons === void 0 ? void 0 : _section$lessons.length) || 0);\n        }, 0);\n        const newCompletedCount = completedLessons.length + (completedLessons.includes(currentLesson.id) ? 0 : 1);\n        setProgressPercent(Math.round(newCompletedCount / totalLessons * 100));\n      }\n    } catch (error) {\n      console.error('Error updating progress:', error);\n      toast.error('Failed to update progress');\n    } finally {\n      setIsLoadingCompletion(false);\n    }\n  };\n\n  // Go to next lesson\n  const goToNextLesson = () => {\n    let foundCurrentLesson = false;\n    let nextLesson = null;\n    for (const section of sections) {\n      if (!section.lessons || section.lessons.length === 0) continue;\n      for (const lesson of section.lessons) {\n        if (foundCurrentLesson) {\n          nextLesson = lesson;\n          break;\n        }\n        if (lesson.id === (currentLesson === null || currentLesson === void 0 ? void 0 : currentLesson.id)) {\n          foundCurrentLesson = true;\n        }\n      }\n      if (nextLesson) break;\n    }\n    if (nextLesson) {\n      navigate(`/dashboard/courses/${courseId}/lessons/${nextLesson.id}`);\n    } else {\n      // If no next lesson, we've reached the end of the course\n      toast.success('Congratulations! You\\'ve reached the end of this course.');\n    }\n  };\n\n  // Toggle section collapse\n  const toggleSection = sectionId => {\n    setActiveSection(activeSection === sectionId ? null : sectionId);\n  };\n  if (isLoading) return /*#__PURE__*/_jsxDEV(LoadingScreen, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 172,\n    columnNumber: 25\n  }, this);\n  if (!course) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center py-12\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-2xl font-bold text-surface-900 dark:text-white mb-4\",\n        children: \"Course Not Found\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-surface-600 dark:text-surface-400 mb-6\",\n        children: \"The course you're looking for doesn't exist or you don't have access to it.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/dashboard/courses\",\n        className: \"inline-flex items-center btn-filled\",\n        children: \"Back to My Courses\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-white dark:bg-surface-900\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"relative h-16 bg-primary-700 dark:bg-primary-900 shadow-md\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-full flex items-center\",\n        children: [/*#__PURE__*/_jsxDEV(Link, {\n          to: \"/dashboard/courses\",\n          className: \"mr-4 text-primary-100 hover:text-white\",\n          children: /*#__PURE__*/_jsxDEV(\"svg\", {\n            xmlns: \"http://www.w3.org/2000/svg\",\n            viewBox: \"0 0 20 20\",\n            fill: \"currentColor\",\n            className: \"w-5 h-5\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              fillRule: \"evenodd\",\n              d: \"M12.79 5.23a.75.75 0 01-.02 1.06L8.832 10l3.938 3.71a.75.75 0 11-1.04 1.08l-4.5-4.25a.75.75 0 010-1.08l4.5-4.25a.75.75 0 011.06.02z\",\n              clipRule: \"evenodd\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 202,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 201,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-lg font-medium text-white truncate\",\n          children: course.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ml-auto flex items-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-48 bg-primary-800 dark:bg-primary-950 rounded-full h-2.5 mr-2\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-primary-300 h-2.5 rounded-full\",\n              style: {\n                width: `${progressPercent}%`\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 210,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 209,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-primary-100 text-sm\",\n            children: [progressPercent, \"% complete\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 215,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-col md:flex-row min-h-[calc(100vh-4rem)]\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-full md:w-80 border-r border-surface-200 dark:border-surface-700 flex-shrink-0 bg-surface-50 dark:bg-surface-800 overflow-y-auto\",\n        children: /*#__PURE__*/_jsxDEV(\"nav\", {\n          className: \"sticky top-0 p-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-lg font-medium text-surface-900 dark:text-white mb-4\",\n            children: \"Course Content\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 224,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-2\",\n            children: sections.map(section => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"border border-surface-200 dark:border-surface-700 rounded-md overflow-hidden\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => toggleSection(section.id),\n                className: \"w-full p-3 flex justify-between items-center bg-white dark:bg-surface-850 hover:bg-surface-50 dark:hover:bg-surface-800 transition-colors text-left\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium text-surface-900 dark:text-white\",\n                  children: section.title\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 235,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"svg\", {\n                  xmlns: \"http://www.w3.org/2000/svg\",\n                  className: `h-5 w-5 text-surface-500 dark:text-surface-400 transform transition-transform ${activeSection === section.id ? 'rotate-180' : ''}`,\n                  viewBox: \"0 0 20 20\",\n                  fill: \"currentColor\",\n                  \"aria-hidden\": \"true\",\n                  children: /*#__PURE__*/_jsxDEV(\"path\", {\n                    fillRule: \"evenodd\",\n                    d: \"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z\",\n                    clipRule: \"evenodd\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 247,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 238,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 231,\n                columnNumber: 19\n              }, this), activeSection === section.id && section.lessons && /*#__PURE__*/_jsxDEV(\"ul\", {\n                className: \"border-t border-surface-200 dark:border-surface-700 divide-y divide-surface-200 dark:divide-surface-700\",\n                children: section.lessons.map(lesson => /*#__PURE__*/_jsxDEV(\"li\", {\n                  children: /*#__PURE__*/_jsxDEV(Link, {\n                    to: `/dashboard/courses/${courseId}/lessons/${lesson.id}`,\n                    className: `block p-3 flex items-center ${(currentLesson === null || currentLesson === void 0 ? void 0 : currentLesson.id) === lesson.id ? 'bg-primary-50 dark:bg-primary-900/30 text-primary-600 dark:text-primary-400' : 'hover:bg-surface-50 dark:hover:bg-surface-800 text-surface-700 dark:text-surface-300'}`,\n                    children: [completedLessons.includes(lesson.id) ? /*#__PURE__*/_jsxDEV(CheckCircleIcon, {\n                      className: \"h-5 w-5 text-success-500 dark:text-success-400 mr-2 flex-shrink-0\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 267,\n                      columnNumber: 31\n                    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"h-5 w-5 border-2 border-surface-300 dark:border-surface-600 rounded-full mr-2 flex-shrink-0\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 269,\n                      columnNumber: 31\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-sm\",\n                      children: lesson.title\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 271,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 258,\n                    columnNumber: 27\n                  }, this)\n                }, lesson.id, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 257,\n                  columnNumber: 25\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 255,\n                columnNumber: 21\n              }, this)]\n            }, section.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 230,\n              columnNumber: 17\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 228,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-1 overflow-y-auto\",\n        children: currentLesson ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-6 max-w-3xl mx-auto\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"text-2xl font-bold text-surface-900 dark:text-white mb-4\",\n            children: currentLesson.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 287,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"prose dark:prose-invert mb-8\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              dangerouslySetInnerHTML: {\n                __html: currentLesson.content || ''\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 294,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 292,\n            columnNumber: 15\n          }, this), currentLesson.video_url && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"aspect-w-16 aspect-h-9 bg-surface-900 rounded-lg overflow-hidden mb-8\",\n            children: /*#__PURE__*/_jsxDEV(\"iframe\", {\n              src: currentLesson.video_url,\n              frameBorder: \"0\",\n              allow: \"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\",\n              allowFullScreen: true,\n              className: \"w-full h-full\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 300,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 299,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-between mt-8 pt-6 border-t border-surface-200 dark:border-surface-700\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 312,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex space-x-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: markLessonAsCompleted,\n                disabled: isLoadingCompletion || completedLessons.includes(currentLesson.id),\n                className: `${completedLessons.includes(currentLesson.id) ? 'bg-success-100 text-success-700 dark:bg-success-900/50 dark:text-success-300' : 'bg-surface-100 text-surface-700 hover:bg-surface-200 dark:bg-surface-800 dark:text-surface-300 dark:hover:bg-surface-700'} px-4 py-2 rounded-md font-medium flex items-center disabled:opacity-50 disabled:cursor-not-allowed transition-colors`,\n                children: completedLessons.includes(currentLesson.id) ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [/*#__PURE__*/_jsxDEV(CheckCircleIcon, {\n                    className: \"h-5 w-5 mr-2\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 327,\n                    columnNumber: 25\n                  }, this), \"Completed\"]\n                }, void 0, true) : isLoadingCompletion ? 'Saving...' : 'Mark as Complete'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 316,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: goToNextLesson,\n                className: \"btn-filled\",\n                children: \"Next Lesson\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 336,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 315,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 311,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 286,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-center h-full\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-surface-600 dark:text-surface-400\",\n            children: \"Select a lesson from the sidebar to begin learning\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 347,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 346,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 194,\n    columnNumber: 5\n  }, this);\n};\n_s(CourseContent, \"HuctxRymGU0W562bN6/n1qxcpLs=\", false, function () {\n  return [useParams, useNavigate, useQuery, useQuery, useQuery];\n});\n_c = CourseContent;\nexport default CourseContent;\nvar _c;\n$RefreshReg$(_c, \"CourseContent\");","map":{"version":3,"names":["useState","useEffect","useParams","Link","useNavigate","useQuery","api","LoadingScreen","CheckCircleIcon","toast","jsxDEV","_jsxDEV","Fragment","_Fragment","CourseContent","_s","courseId","lessonId","navigate","activeSection","setActiveSection","currentLesson","setCurrentLesson","completedLessons","setCompletedLessons","progressPercent","setProgressPercent","isLoadingCompletion","setIsLoadingCompletion","data","courseData","isLoading","isLoadingCourse","response","get","sectionsData","isLoadingSections","enabled","progressData","isLoadingProgress","course","sections","length","foundLesson","firstLessonInCourse","section","lessons","lesson","find","l","id","replace","completed_lessons","total_lessons","progress_percentage","markLessonAsCompleted","post","success","prev","includes","totalLessons","reduce","count","_section$lessons","newCompletedCount","Math","round","error","console","goToNextLesson","foundCurrentLesson","nextLesson","toggleSection","sectionId","fileName","_jsxFileName","lineNumber","columnNumber","className","children","to","xmlns","viewBox","fill","fillRule","d","clipRule","title","style","width","map","onClick","dangerouslySetInnerHTML","__html","content","video_url","src","frameBorder","allow","allowFullScreen","disabled","_c","$RefreshReg$"],"sources":["C:/Users/soura/Projects/LearnHub/frontend/src/pages/student/CourseContent.tsx"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { useParams, Link, useNavigate } from 'react-router-dom';\r\nimport { useQuery } from '@tanstack/react-query';\r\nimport api from '../../lib/api';\r\nimport LoadingScreen from '../../components/common/LoadingScreen';\r\nimport { CheckCircleIcon, LockClosedIcon } from '@heroicons/react/24/outline';\r\nimport { Course, Section, Lesson } from '../../types';\r\nimport { toast } from 'react-hot-toast';\r\n\r\nconst CourseContent = () => {\r\n  const { courseId, lessonId } = useParams<{ courseId: string; lessonId?: string }>();\r\n  const navigate = useNavigate();\r\n  const [activeSection, setActiveSection] = useState<string | null>(null);\r\n  const [currentLesson, setCurrentLesson] = useState<Lesson | null>(null);\r\n  const [completedLessons, setCompletedLessons] = useState<string[]>([]);\r\n  const [progressPercent, setProgressPercent] = useState(0);\r\n  const [isLoadingCompletion, setIsLoadingCompletion] = useState(false);\r\n\r\n  // Fetch course details\r\n  const { data: courseData, isLoading: isLoadingCourse } = useQuery(\r\n    ['course', courseId],\r\n    async () => {\r\n      const response = await api.get(`/courses/${courseId}`);\r\n      return response.data;\r\n    }\r\n  );\r\n\r\n  // Fetch course sections and lessons\r\n  const { data: sectionsData, isLoading: isLoadingSections } = useQuery(\r\n    ['course-sections', courseId],\r\n    async () => {\r\n      const response = await api.get(`/courses/${courseId}/sections`);\r\n      return response.data;\r\n    },\r\n    {\r\n      enabled: !!courseId\r\n    }\r\n  );\r\n\r\n  // Fetch user's progress for this course\r\n  const { data: progressData, isLoading: isLoadingProgress } = useQuery(\r\n    ['course-progress', courseId],\r\n    async () => {\r\n      const response = await api.get(`/enrollments/progress/${courseId}`);\r\n      return response.data;\r\n    },\r\n    {\r\n      enabled: !!courseId\r\n    }\r\n  );\r\n\r\n  const isLoading = isLoadingCourse || isLoadingSections || isLoadingProgress;\r\n  const course: Course = courseData?.data;\r\n  const sections: Section[] = sectionsData?.data || [];\r\n\r\n  // Find current lesson based on URL param or first lesson\r\n  useEffect(() => {\r\n    if (!sections || sections.length === 0) return;\r\n\r\n    let foundLesson = null;\r\n    let firstLessonInCourse = null;\r\n\r\n    for (const section of sections) {\r\n      if (!firstLessonInCourse && section[0].lessons && section.lessons.length > 0) {\r\n        firstLessonInCourse = section.lessons[0];\r\n      }\r\n\r\n      if (lessonId && section.lessons) {\r\n        const lesson = section.lessons.find(l => l.id === lessonId);\r\n        if (lesson) {\r\n          foundLesson = lesson;\r\n          setActiveSection(section.id);\r\n          break;\r\n        }\r\n      }\r\n    }\r\n\r\n    if (lessonId && !foundLesson) {\r\n      // If lessonId is provided but not found, redirect to course page\r\n      navigate(`/dashboard/courses/${courseId}`);\r\n      return;\r\n    }\r\n\r\n    // If no lesson is specified in URL, use the first lesson or stay on current\r\n    setCurrentLesson(foundLesson || firstLessonInCourse);\r\n    \r\n    // If no lessonId in URL but we found a lesson, update the URL\r\n    if (!lessonId && firstLessonInCourse) {\r\n      navigate(`/dashboard/courses/${courseId}/lessons/${firstLessonInCourse.id}`, { replace: true });\r\n    }\r\n  }, [sections, lessonId, courseId, navigate]);\r\n\r\n  // Update progress when progressData changes\r\n  useEffect(() => {\r\n    if (progressData?.data) {\r\n      const { completed_lessons, total_lessons, progress_percentage } = progressData.data;\r\n      setCompletedLessons(completed_lessons || []);\r\n      setProgressPercent(progress_percentage || 0);\r\n    }\r\n  }, [progressData]);\r\n\r\n  // Update progress by marking current lesson as completed\r\n  const markLessonAsCompleted = async () => {\r\n    if (!currentLesson) return;\r\n\r\n    try {\r\n      setIsLoadingCompletion(true);\r\n      \r\n      const response = await api.post(`/enrollments/progress/${courseId}/lessons/${currentLesson.id}`);\r\n      \r\n      if (response.data.success) {\r\n        toast.success('Progress saved!');\r\n        \r\n        // Update local state\r\n        setCompletedLessons(prev => {\r\n          if (prev.includes(currentLesson.id)) return prev;\r\n          return [...prev, currentLesson.id];\r\n        });\r\n        \r\n        // Calculate new progress percentage\r\n        const totalLessons = sections.reduce((count, section) => \r\n          count + (section.lessons?.length || 0), 0);\r\n        \r\n        const newCompletedCount = completedLessons.length + \r\n          (completedLessons.includes(currentLesson.id) ? 0 : 1);\r\n          \r\n        setProgressPercent(Math.round((newCompletedCount / totalLessons) * 100));\r\n      }\r\n    } catch (error) {\r\n      console.error('Error updating progress:', error);\r\n      toast.error('Failed to update progress');\r\n    } finally {\r\n      setIsLoadingCompletion(false);\r\n    }\r\n  };\r\n\r\n  // Go to next lesson\r\n  const goToNextLesson = () => {\r\n    let foundCurrentLesson = false;\r\n    let nextLesson = null;\r\n\r\n    for (const section of sections) {\r\n      if (!section.lessons || section.lessons.length === 0) continue;\r\n\r\n      for (const lesson of section.lessons) {\r\n        if (foundCurrentLesson) {\r\n          nextLesson = lesson;\r\n          break;\r\n        }\r\n        \r\n        if (lesson.id === currentLesson?.id) {\r\n          foundCurrentLesson = true;\r\n        }\r\n      }\r\n      \r\n      if (nextLesson) break;\r\n    }\r\n\r\n    if (nextLesson) {\r\n      navigate(`/dashboard/courses/${courseId}/lessons/${nextLesson.id}`);\r\n    } else {\r\n      // If no next lesson, we've reached the end of the course\r\n      toast.success('Congratulations! You\\'ve reached the end of this course.');\r\n    }\r\n  };\r\n\r\n  // Toggle section collapse\r\n  const toggleSection = (sectionId: string) => {\r\n    setActiveSection(activeSection === sectionId ? null : sectionId);\r\n  };\r\n\r\n  if (isLoading) return <LoadingScreen />;\r\n\r\n  if (!course) {\r\n    return (\r\n      <div className=\"text-center py-12\">\r\n        <h2 className=\"text-2xl font-bold text-surface-900 dark:text-white mb-4\">\r\n          Course Not Found\r\n        </h2>\r\n        <p className=\"text-surface-600 dark:text-surface-400 mb-6\">\r\n          The course you're looking for doesn't exist or you don't have access to it.\r\n        </p>\r\n        <Link\r\n          to=\"/dashboard/courses\"\r\n          className=\"inline-flex items-center btn-filled\"\r\n        >\r\n          Back to My Courses\r\n        </Link>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"bg-white dark:bg-surface-900\">\r\n      <div className=\"relative h-16 bg-primary-700 dark:bg-primary-900 shadow-md\">\r\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-full flex items-center\">\r\n          <Link\r\n            to=\"/dashboard/courses\"\r\n            className=\"mr-4 text-primary-100 hover:text-white\"\r\n          >\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\" fill=\"currentColor\" className=\"w-5 h-5\">\r\n              <path fillRule=\"evenodd\" d=\"M12.79 5.23a.75.75 0 01-.02 1.06L8.832 10l3.938 3.71a.75.75 0 11-1.04 1.08l-4.5-4.25a.75.75 0 010-1.08l4.5-4.25a.75.75 0 011.06.02z\" clipRule=\"evenodd\" />\r\n            </svg>\r\n          </Link>\r\n          <h1 className=\"text-lg font-medium text-white truncate\">\r\n            {course.title}\r\n          </h1>\r\n          <div className=\"ml-auto flex items-center\">\r\n            <div className=\"w-48 bg-primary-800 dark:bg-primary-950 rounded-full h-2.5 mr-2\">\r\n              <div \r\n                className=\"bg-primary-300 h-2.5 rounded-full\" \r\n                style={{ width: `${progressPercent}%` }}\r\n              ></div>\r\n            </div>\r\n            <span className=\"text-primary-100 text-sm\">{progressPercent}% complete</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"flex flex-col md:flex-row min-h-[calc(100vh-4rem)]\">\r\n        {/* Sidebar - Course Curriculum */}\r\n        <div className=\"w-full md:w-80 border-r border-surface-200 dark:border-surface-700 flex-shrink-0 bg-surface-50 dark:bg-surface-800 overflow-y-auto\">\r\n          <nav className=\"sticky top-0 p-4\">\r\n            <h2 className=\"text-lg font-medium text-surface-900 dark:text-white mb-4\">\r\n              Course Content\r\n            </h2>\r\n            \r\n            <div className=\"space-y-2\">\r\n              {sections.map((section) => (\r\n                <div key={section.id} className=\"border border-surface-200 dark:border-surface-700 rounded-md overflow-hidden\">\r\n                  <button\r\n                    onClick={() => toggleSection(section.id)}\r\n                    className=\"w-full p-3 flex justify-between items-center bg-white dark:bg-surface-850 hover:bg-surface-50 dark:hover:bg-surface-800 transition-colors text-left\"\r\n                  >\r\n                    <span className=\"font-medium text-surface-900 dark:text-white\">\r\n                      {section.title}\r\n                    </span>\r\n                    <svg\r\n                      xmlns=\"http://www.w3.org/2000/svg\"\r\n                      className={`h-5 w-5 text-surface-500 dark:text-surface-400 transform transition-transform ${\r\n                        activeSection === section.id ? 'rotate-180' : ''\r\n                      }`}\r\n                      viewBox=\"0 0 20 20\"\r\n                      fill=\"currentColor\"\r\n                      aria-hidden=\"true\"\r\n                    >\r\n                      <path\r\n                        fillRule=\"evenodd\"\r\n                        d=\"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z\"\r\n                        clipRule=\"evenodd\"\r\n                      />\r\n                    </svg>\r\n                  </button>\r\n                  {activeSection === section.id && section.lessons && (\r\n                    <ul className=\"border-t border-surface-200 dark:border-surface-700 divide-y divide-surface-200 dark:divide-surface-700\">\r\n                      {section.lessons.map((lesson) => (\r\n                        <li key={lesson.id}>\r\n                          <Link\r\n                            to={`/dashboard/courses/${courseId}/lessons/${lesson.id}`}\r\n                            className={`block p-3 flex items-center ${\r\n                              currentLesson?.id === lesson.id\r\n                                ? 'bg-primary-50 dark:bg-primary-900/30 text-primary-600 dark:text-primary-400'\r\n                                : 'hover:bg-surface-50 dark:hover:bg-surface-800 text-surface-700 dark:text-surface-300'\r\n                            }`}\r\n                          >\r\n                            {completedLessons.includes(lesson.id) ? (\r\n                              <CheckCircleIcon className=\"h-5 w-5 text-success-500 dark:text-success-400 mr-2 flex-shrink-0\" />\r\n                            ) : (\r\n                              <div className=\"h-5 w-5 border-2 border-surface-300 dark:border-surface-600 rounded-full mr-2 flex-shrink-0\" />\r\n                            )}\r\n                            <span className=\"text-sm\">{lesson.title}</span>\r\n                          </Link>\r\n                        </li>\r\n                      ))}\r\n                    </ul>\r\n                  )}\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </nav>\r\n        </div>\r\n\r\n        {/* Main content - Lesson */}\r\n        <div className=\"flex-1 overflow-y-auto\">\r\n          {currentLesson ? (\r\n            <div className=\"p-6 max-w-3xl mx-auto\">\r\n              <h1 className=\"text-2xl font-bold text-surface-900 dark:text-white mb-4\">\r\n                {currentLesson.title}\r\n              </h1>\r\n              \r\n              {/* Lesson content */}\r\n              <div className=\"prose dark:prose-invert mb-8\">\r\n                {/* This would be the lesson content, potentially HTML from a rich text editor */}\r\n                <div dangerouslySetInnerHTML={{ __html: currentLesson.content || '' }} />\r\n              </div>\r\n              \r\n              {/* Lesson video (if available) */}\r\n              {currentLesson.video_url && (\r\n                <div className=\"aspect-w-16 aspect-h-9 bg-surface-900 rounded-lg overflow-hidden mb-8\">\r\n                  <iframe\r\n                    src={currentLesson.video_url}\r\n                    frameBorder=\"0\"\r\n                    allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\r\n                    allowFullScreen\r\n                    className=\"w-full h-full\"\r\n                  ></iframe>\r\n                </div>\r\n              )}\r\n              \r\n              {/* Navigation buttons */}\r\n              <div className=\"flex justify-between mt-8 pt-6 border-t border-surface-200 dark:border-surface-700\">\r\n                <div>\r\n                  {/* If needed, add a previous lesson button here */}\r\n                </div>\r\n                <div className=\"flex space-x-4\">\r\n                  <button\r\n                    onClick={markLessonAsCompleted}\r\n                    disabled={isLoadingCompletion || completedLessons.includes(currentLesson.id)}\r\n                    className={`${\r\n                      completedLessons.includes(currentLesson.id)\r\n                        ? 'bg-success-100 text-success-700 dark:bg-success-900/50 dark:text-success-300'\r\n                        : 'bg-surface-100 text-surface-700 hover:bg-surface-200 dark:bg-surface-800 dark:text-surface-300 dark:hover:bg-surface-700'\r\n                    } px-4 py-2 rounded-md font-medium flex items-center disabled:opacity-50 disabled:cursor-not-allowed transition-colors`}\r\n                  >\r\n                    {completedLessons.includes(currentLesson.id) ? (\r\n                      <>\r\n                        <CheckCircleIcon className=\"h-5 w-5 mr-2\" />\r\n                        Completed\r\n                      </>\r\n                    ) : isLoadingCompletion ? (\r\n                      'Saving...'\r\n                    ) : (\r\n                      'Mark as Complete'\r\n                    )}\r\n                  </button>\r\n                  <button\r\n                    onClick={goToNextLesson}\r\n                    className=\"btn-filled\"\r\n                  >\r\n                    Next Lesson\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <div className=\"flex items-center justify-center h-full\">\r\n              <p className=\"text-surface-600 dark:text-surface-400\">\r\n                Select a lesson from the sidebar to begin learning\r\n              </p>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CourseContent;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}